 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Result</title>
  <link rel="icon" href="Home.png">
  <link rel="stylesheet" href="ResultPage.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
 
</head>
<body>
<header>
  <div class="logo">ðŸŒ± Moodify</div>
  <nav>
    <a href="homePage.html" target="_blank">Home</a>
    <a href="About.html" target="_blank">About</a>
    <a href="Learn.html" target="_blank">Learn about mental health</a>
  </nav>
  <div class="right-section">
      <div class="login"><i class="fa-solid fa-user"></i> <a href="LoginPage.html" target="_blank">Login</a></div>
      <div class="menu-toggle">&#9776;</div>
  </div>
</header>

<div class="container">
  <h1>Your Result</h1>
</div>

<div class="progress-container">
  <div class="progress-bar">
    <div class="step completed">
      <div class="circle"></div>
      <p>Test Question</p>
    </div>
    <div class="line"></div>
    <div class="step completed">
      <div class="circle"></div>
      <p>Optional Question</p>
    </div>
    <div class="line"></div>
    <div class="step active">
      <div class="circle"></div>
      <p>Your Result</p>
    </div>
  </div>
</div>

<div class="text">
  <h2 id="finalScore"></h2>
</div>

<div class="question" id="answersSection"></div>

<div class="button_next">
  <div class="another-test"><a href="HealthTest.html">Take Another Test</a></div>
</div>

<footer>
  <div class="footer-container">
    <div class="footer-col">
      <h3>Quick Links</h3>
      <a href="homePage.html" target="_blank">Home</a>
      <a href="About.html" target="_blank">About</a>
      <a href="">Wellness tools</a>
      <a href="ContactForm.html" target="_blank">Contact</a>
    </div>
    <div class="footer-col">
      <h3>Resources</h3>
      <a href="#">Blog</a>
      <a href="#">Self-Care Tips</a>
      <a href="#">Mental Health Guides</a>
    </div>
    <div class="footer-col">
      <h3>Contact</h3>
      <p>Email:support2moodify.com</p>
      <p>Phone: +91-1234567899</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>Made with ðŸ’š to support your mental health journey.</p>
  </div>
</footer>



<!-- âœ… Load reusable saveTest function -->
<script src="saveTest.js"></script>

<!-- âœ… Then your OCD test logic -->
<script>
document.addEventListener("DOMContentLoaded", () => {
  const ocdAnswers = JSON.parse(localStorage.getItem("ocdAnswers")) || [];
  const optionalAnswers = JSON.parse(localStorage.getItem("optionalAnswers")) || [];

  const testQuestions = [
    "I have unwanted thoughts, images, or urges that keep coming into my mind.",
    "I feel the need to repeat certain actions (like checking or cleaning) over and over.",
    "I spend a lot of time making sure things are in a particular order or arranged perfectly.",
    "I worry something bad will happen if I donâ€™t do certain rituals or routines.",
    "I wash my hands, clean, or check things more often than others think is necessary.",
    "I find it hard to control my repetitive thoughts or behaviors even when I try.",
    "I feel anxious or uncomfortable if things arenâ€™t â€œjust right.â€",
    "My daily life or routines are disrupted by these thoughts or actions.",
    "I avoid situations that might trigger my unwanted thoughts or rituals.",
    "I feel relief only after completing a repetitive action or ritual."
  ];

  const optionLabels = ["NOT AT ALL","SEVERAL DAYS","MORE THAN HALF THE DAYS","NEARLY EVERY DAY"];
  const optionalLabels = ["Never","Sometimes","Often","Always"];

  // âœ… Calculate total score
  const totalScore = ocdAnswers.reduce((a,b)=>a+(b!==null?b:0),0);

  // âœ… Determine interpretation
  let interpretation = "";
  let color = "";
  if (totalScore <= 4) {
    interpretation = "No Significant OCD Symptoms";
    color = "#38B2AC";
  } else if (totalScore <= 9) {
    interpretation = "Mild OCD Tendencies";
    color = "#4DBD84";
  } else if (totalScore <= 14) {
    interpretation = "Moderate OCD Symptoms";
    color = "#F6C23E";
  } else if (totalScore <= 19) {
    interpretation = "Moderately Severe OCD Symptoms";
    color = "#F58042";
  } else {
    interpretation = "Severe OCD Symptoms";
    color = "#CC0000";
  }

  // âœ… Display result text
  document.getElementById("finalScore").innerHTML = 
    `Your Total Score: <b>${totalScore}</b><br><span style="color:${color};">${interpretation}</span>`;

  // âœ… Display answers
  const answersDiv = document.getElementById("answersSection");
  let html = "<h3>Your Answers:</h3><ul style='text-align:left'>";
  ocdAnswers.forEach((ans, i) => {
    const ansText = ans !== null ? optionLabels[ans] : "Not answered";
    html += `<li><b>Q${i+1}:</b> ${testQuestions[i]} <br> <span style="color:#009688">Your Answer: ${ansText}</span></li><br>`;
  });

  optionalAnswers.forEach((ans, i) => {
    if(ans !== null){
      const ansText = optionalLabels[ans] || "Not answered";
      html += `<li><b>Optional Question ${i+1}:</b> <span style="color:#009688">Your Answer: ${ansText}</span></li><br>`;
    }
  });

  html += "</ul>";
  answersDiv.innerHTML = html;

  // âœ… Save the test result to backend *after showing UI*
  saveTestResult("OCD Test", totalScore, interpretation);


});

// âœ… Menu toggle
document.querySelector(".menu-toggle").addEventListener("click", () => 
  document.querySelector("nav").classList.toggle("show")
);


 document.querySelector(".menu-toggle").addEventListener("click",()=>document.querySelector("nav").classList.toggle("show"));
        document.addEventListener("DOMContentLoaded", () => {
  const loginDiv = document.querySelector(".login");
  const loginLink = loginDiv.querySelector("a");
  const userLoggedIn = localStorage.getItem("isLoggedIn");
  const username = localStorage.getItem("username");
 const profilePic = localStorage.getItem("userAvatar") || "profile.jpg";


  if (userLoggedIn && username) {
    // Create new HTML for logged-in state
    loginDiv.innerHTML = `
      <div class="user-profile" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
        <img src="${profilePic}" alt="Profile" 
             style="width:30px;height:30px;border-radius:50%;object-fit:cover;border:2px solid #38b3ac;">
        <a href="Dashboard.html" style="text-decoration:none;color:#333;">Hi, ${username} ðŸ‘‹</a>
      </div>
    `;
  }
});
</script>

</body>
</html> 





