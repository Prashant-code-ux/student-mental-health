<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Youth Mental Health Test</title>
  <link rel="icon" href="Home.png">
  <link rel="stylesheet" href="Test.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
<header>
  <div class="logo">üå± Moodify</div>
  <nav>
    <a href="homePage.html" target="_blank">Home</a>
    <a href="About.html" target="_blank">About</a>
    <a href="Learn.html" target="_blank">Learn about mental health</a>
  </nav>
  <div class="right-section">
    <div class="login"><i class="fa-solid fa-user"></i> <a href="LoginPage.html" target="_blank">Login</a></div>
    <div class="menu-toggle">&#9776;</div>
  </div>
</header>

<section class="hero-section">
  <div class="hero-content">
    <h1>Youth Mental Health Test</h1>
    <p class="hero-quote">
      ‚ÄúIt‚Äôs okay to not be okay ‚Äî understanding your feelings is the first step to healing.‚Äù
    </p>
    <p class="hero-subtext">
      This short test helps young people reflect on their emotions, thoughts, and behaviors to better understand their mental well-being.
    </p>
    <a href="#testStart" class="hero-btn">Start Test</a>
  </div>
</section>
<span id="testStart"></span>

<div class="progress-container">
  <div class="progress-bar">
    <div class="step active">
      <div class="circle"></div>
      <p>Test Question</p>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle"></div>
      <p>Optional Question</p>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle"></div>
      <p>Your Result</p>
    </div>
  </div>
</div>

<div class="text">
  <p><b>Over the last 2 weeks</b>, how often have you felt the following?</p>
  <div class="note">
    <p>Please note, all fields are required.</p>
  </div>
</div>

<!-- Questions start -->
<div class="question">
  <p>1. Have you felt sad, down, or hopeless most of the time?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>2. Have you lost interest or pleasure in doing things you used to enjoy?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>3. Have you felt nervous, anxious, or on edge without knowing why?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>4. Have you had trouble sleeping ‚Äî either falling asleep, staying asleep, or sleeping too much?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>5. Have you felt tired or had little energy even after resting?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>6. Have you found it hard to concentrate on studies, tasks, or conversations?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>7. Have you felt bad about yourself or that you are a failure or have let others down?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>8. Have you felt lonely or disconnected from friends or family?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="question">
  <p>9. Have you ever felt that life is not worth living?</p>
  <div class="option">
    <button>NOT AT ALL</button>
    <button>SOMETIMES</button>
    <button>OFTEN</button>
    <button>NEARLY EVERY DAY</button>
  </div>
</div>

<div class="button_next button_next1">
  <a href="Youth_mental_health_optional.html" target="_blank" id="nextBtn">NEXT <i class="fa-solid fa-arrow-right"></i></a>
</div>

<!-- Footer -->
<footer>
  <div class="footer-container">
    <div class="footer-col">
      <h3>Quick Links</h3>
      <a href="homePage.html" target="_blank">Home</a>
      <a href="About.html" target="_blank">About</a>
      <a href="Learn.html" target="_blank">Learn about mental health</a>
    </div>
    <div class="footer-col">
      <h3>Resources</h3>
      <a href="#">Blog</a>
      <a href="#">Self-Care Tips</a>
      <a href="#">Mental Health Guides</a>
    </div>
    <div class="footer-col">
      <h3>Contact</h3>
      <p>Email: support2moodify.com</p>
      <p>Phone: +91-1234567899</p>
    </div>
  </div>
  <div class="footer-bottom">
    <p>Made with üíö to support your mental health journey.</p>
  </div>
</footer>

<script>
const optionScores = {
  "NOT AT ALL": 0,
  "SOMETIMES": 1,
  "OFTEN": 2,
  "NEARLY EVERY DAY": 3
};

let answers = Array.from(document.querySelectorAll(".question")).map(() => null);

document.querySelectorAll(".question").forEach((questionEl, qIndex) => {
  const buttons = questionEl.querySelectorAll("button");

  buttons.forEach((btn) => {
    btn.addEventListener("click", () => {
      questionEl.querySelectorAll("button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const score = optionScores[btn.textContent.trim()];
      answers[qIndex] = score;
    });
  });
});

document.getElementById("nextBtn").addEventListener("click", (e) => {
  if (answers.includes(null)) {
    e.preventDefault();
    const msg = document.createElement("div");
    msg.textContent = "‚ö†Ô∏è Please answer all questions before continuing.";
    msg.className = "warning";
    document.body.appendChild(msg);
    setTimeout(() => msg.remove(), 2500);
    return;
  }

  localStorage.setItem("youthMentalHealthAnswers", JSON.stringify(answers));

  const steps = document.querySelectorAll(".step");
  steps[0].classList.add("completed");
  steps[1].classList.add("active");
});

window.addEventListener("DOMContentLoaded", () => {
  const savedAnswers = JSON.parse(localStorage.getItem("youthMentalHealthAnswers"));
  if (savedAnswers) {
    savedAnswers.forEach((score, qIndex) => {
      if (score !== null) {
        const questionEl = document.querySelectorAll(".question")[qIndex];
        if (!questionEl) return;
        const buttons = questionEl.querySelectorAll("button");
        const selectedBtn = Array.from(buttons).find(
          btn => optionScores[btn.textContent.trim()] === score
        );
        if (selectedBtn) selectedBtn.classList.add("active");
      }
    });
  }
});

document.querySelector(".menu-toggle").addEventListener("click", () => 
  document.querySelector("nav").classList.toggle("show")
);

document.addEventListener("DOMContentLoaded", () => {
  const loginDiv = document.querySelector(".login");
  const userLoggedIn = localStorage.getItem("isLoggedIn");
  const username = localStorage.getItem("username");
  const profilePic = localStorage.getItem("userAvatar") || "profile.jpg";

  if (userLoggedIn && username) {
    loginDiv.innerHTML = `
      <div class="user-profile" style="display:flex;align-items:center;gap:8px;cursor:pointer;">
        <img src="${profilePic}" alt="Profile" 
             style="width:30px;height:30px;border-radius:50%;object-fit:cover;border:2px solid #38b3ac;">
        <a href="Dashboard.html" style="text-decoration:none;color:#333;">Hi, ${username} üëã</a>
      </div>
    `;
  }
});
</script>
</body>
</html>
